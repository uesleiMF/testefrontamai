{"ast":null,"code":"var _jsxFileName = \"/home/ues/Documentos/GitHub/testefrontamai/src/Dashboard.js\";\nimport React, { useEffect, useState, useRef } from \"react\";\nimport api from \"./api\";\nexport default function Dashboard() {\n  const [casais, setCasais] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [search, setSearch] = useState(\"\");\n  const [modalOpen, setModalOpen] = useState(false);\n  const [editing, setEditing] = useState(null);\n  const fileRef = useRef();\n  const [form, setForm] = useState({\n    nomeH: \"\",\n    nomeM: \"\",\n    niverH: \"\",\n    niverM: \"\",\n    foto: null\n  });\n\n  const load = async () => {\n    setLoading(true);\n\n    try {\n      const r = await api.get(\"/casais\", {\n        params: {\n          search\n        }\n      });\n      setCasais(r.data);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    load();\n  }, [search]);\n\n  const handleChange = e => {\n    setForm({ ...form,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const handleFile = e => {\n    setForm({ ...form,\n      foto: e.target.files[0]\n    });\n  };\n\n  const openModal = (item = null) => {\n    setEditing(item);\n\n    if (item) {\n      var _item$niverH, _item$niverM;\n\n      setForm({\n        nomeH: item.nomeH,\n        nomeM: item.nomeM,\n        niverH: ((_item$niverH = item.niverH) === null || _item$niverH === void 0 ? void 0 : _item$niverH.substring(0, 10)) || \"\",\n        niverM: ((_item$niverM = item.niverM) === null || _item$niverM === void 0 ? void 0 : _item$niverM.substring(0, 10)) || \"\",\n        foto: null\n      });\n    } else {\n      setForm({\n        nomeH: \"\",\n        nomeM: \"\",\n        niverH: \"\",\n        niverM: \"\",\n        foto: null\n      });\n    }\n\n    setModalOpen(true);\n  };\n\n  const save = async () => {\n    const fd = new FormData();\n    fd.append(\"nomeH\", form.nomeH);\n    fd.append(\"nomeM\", form.nomeM);\n    fd.append(\"niverH\", form.niverH);\n    fd.append(\"niverM\", form.niverM);\n    if (form.foto) fd.append(\"foto\", form.foto);\n\n    if (editing) {\n      await api.put(`/casais/${editing._id}`, fd);\n    } else {\n      await api.post(\"/casais\", fd);\n    }\n\n    setModalOpen(false);\n    load();\n  };\n\n  const remove = async id => {\n    if (confirm(\"Tem certeza que deseja excluir?\")) {\n      await api.delete(`/casais/${id}`);\n      load();\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      padding: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }\n  }, \"Dashboard\"), /*#__PURE__*/React.createElement(\"input\", {\n    placeholder: \"Buscar...\",\n    value: search,\n    onChange: e => setSearch(e.target.value),\n    style: {\n      padding: 8,\n      width: 200,\n      marginBottom: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => openModal(),\n    style: {\n      marginLeft: 10\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }\n  }, \"Adicionar\"), loading ? /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }\n  }, \"Carregando...\") : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 9\n    }\n  }, casais.map(c => /*#__PURE__*/React.createElement(\"div\", {\n    key: c._id,\n    style: {\n      border: \"1px solid #ccc\",\n      padding: 10,\n      marginBottom: 10\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 15\n    }\n  }, \"H: \", c.nomeH), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 15\n    }\n  }, \"M: \", c.nomeM), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => openModal(c),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 15\n    }\n  }, \"Editar\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => remove(c._id),\n    style: {\n      marginLeft: 10\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 15\n    }\n  }, \"Excluir\")))), modalOpen && /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      position: \"fixed\",\n      top: 0,\n      left: 0,\n      right: 0,\n      bottom: 0,\n      background: \"#00000055\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      background: \"#fff\",\n      padding: 20,\n      width: 300,\n      margin: \"80px auto\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }\n  }, editing ? \"Editar\" : \"Adicionar\"), /*#__PURE__*/React.createElement(\"input\", {\n    name: \"nomeH\",\n    placeholder: \"Nome dele\",\n    value: form.nomeH,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    name: \"nomeM\",\n    placeholder: \"Nome dela\",\n    value: form.nomeM,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"date\",\n    name: \"niverH\",\n    value: form.niverH,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"date\",\n    name: \"niverM\",\n    value: form.niverM,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    ref: fileRef,\n    onChange: handleFile,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: save,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 13\n    }\n  }, \"Salvar\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => setModalOpen(false),\n    style: {\n      marginLeft: 10\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 13\n    }\n  }, \"Cancelar\"))));\n}","map":{"version":3,"sources":["/home/ues/Documentos/GitHub/testefrontamai/src/Dashboard.js"],"names":["React","useEffect","useState","useRef","api","Dashboard","casais","setCasais","loading","setLoading","search","setSearch","modalOpen","setModalOpen","editing","setEditing","fileRef","form","setForm","nomeH","nomeM","niverH","niverM","foto","load","r","get","params","data","handleChange","e","target","name","value","handleFile","files","openModal","item","substring","save","fd","FormData","append","put","_id","post","remove","id","confirm","delete","padding","width","marginBottom","marginLeft","map","c","border","position","top","left","right","bottom","background","margin"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\nimport api from \"./api\";\n\nexport default function Dashboard() {\n  const [casais, setCasais] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [search, setSearch] = useState(\"\");\n  const [modalOpen, setModalOpen] = useState(false);\n  const [editing, setEditing] = useState(null);\n\n  const fileRef = useRef();\n\n  const [form, setForm] = useState({\n    nomeH: \"\",\n    nomeM: \"\",\n    niverH: \"\",\n    niverM: \"\",\n    foto: null,\n  });\n\n  const load = async () => {\n    setLoading(true);\n    try {\n      const r = await api.get(\"/casais\", { params: { search } });\n      setCasais(r.data);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    load();\n  }, [search]);\n\n  const handleChange = (e) => {\n    setForm({ ...form, [e.target.name]: e.target.value });\n  };\n\n  const handleFile = (e) => {\n    setForm({ ...form, foto: e.target.files[0] });\n  };\n\n  const openModal = (item = null) => {\n    setEditing(item);\n    if (item) {\n      setForm({\n        nomeH: item.nomeH,\n        nomeM: item.nomeM,\n        niverH: item.niverH?.substring(0, 10) || \"\",\n        niverM: item.niverM?.substring(0, 10) || \"\",\n        foto: null,\n      });\n    } else {\n      setForm({ nomeH: \"\", nomeM: \"\", niverH: \"\", niverM: \"\", foto: null });\n    }\n    setModalOpen(true);\n  };\n\n  const save = async () => {\n    const fd = new FormData();\n    fd.append(\"nomeH\", form.nomeH);\n    fd.append(\"nomeM\", form.nomeM);\n    fd.append(\"niverH\", form.niverH);\n    fd.append(\"niverM\", form.niverM);\n    if (form.foto) fd.append(\"foto\", form.foto);\n\n    if (editing) {\n      await api.put(`/casais/${editing._id}`, fd);\n    } else {\n      await api.post(\"/casais\", fd);\n    }\n\n    setModalOpen(false);\n    load();\n  };\n\n  const remove = async (id) => {\n    if (confirm(\"Tem certeza que deseja excluir?\")) {\n      await api.delete(`/casais/${id}`);\n      load();\n    }\n  };\n\n  return (\n    <div style={{ padding: 20 }}>\n      <h1>Dashboard</h1>\n\n      <input\n        placeholder=\"Buscar...\"\n        value={search}\n        onChange={(e) => setSearch(e.target.value)}\n        style={{ padding: 8, width: 200, marginBottom: 20 }}\n      />\n\n      <button onClick={() => openModal()} style={{ marginLeft: 10 }}>Adicionar</button>\n\n      {loading ? (\n        <p>Carregando...</p>\n      ) : (\n        <div>\n          {casais.map((c) => (\n            <div key={c._id} style={{ border: \"1px solid #ccc\", padding: 10, marginBottom: 10 }}>\n              <p>H: {c.nomeH}</p>\n              <p>M: {c.nomeM}</p>\n              <button onClick={() => openModal(c)}>Editar</button>\n              <button onClick={() => remove(c._id)} style={{ marginLeft: 10 }}>Excluir</button>\n            </div>\n          ))}\n        </div>\n      )}\n\n      {modalOpen && (\n        <div style={{ position: \"fixed\", top: 0, left: 0, right: 0, bottom: 0, background: \"#00000055\" }}>\n          <div style={{ background: \"#fff\", padding: 20, width: 300, margin: \"80px auto\" }}>\n            <h2>{editing ? \"Editar\" : \"Adicionar\"}</h2>\n\n            <input name=\"nomeH\" placeholder=\"Nome dele\" value={form.nomeH} onChange={handleChange} />\n            <br /><br />\n\n            <input name=\"nomeM\" placeholder=\"Nome dela\" value={form.nomeM} onChange={handleChange} />\n            <br /><br />\n\n            <input type=\"date\" name=\"niverH\" value={form.niverH} onChange={handleChange} />\n            <br /><br />\n\n            <input type=\"date\" name=\"niverM\" value={form.niverM} onChange={handleChange} />\n            <br /><br />\n\n            <input type=\"file\" ref={fileRef} onChange={handleFile} />\n            <br /><br />\n\n            <button onClick={save}>Salvar</button>\n            <button onClick={() => setModalOpen(false)} style={{ marginLeft: 10 }}>Cancelar</button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}