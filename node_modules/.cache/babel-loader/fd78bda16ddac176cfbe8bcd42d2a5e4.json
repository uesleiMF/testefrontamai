{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/ueslei/Documentos/GitHub/testefrontamai/src/pages/Login.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useState } from \"react\";\nimport { Center, Form, H1, WrappLogin, Input, Button } from \"../styles/styles\";\nimport { AuthGlobal } from \"../context/store/Auth\";\nimport { setCurrentUser, logoutUser } from \"../context/actions/autenticacion.action\";\nimport Error from \"../components/Error\";\nimport jwt_decode from \"jwt-decode\";\nimport axios from 'axios';\n\nconst Login = () => {\n  _s();\n\n  const context = useContext(AuthGlobal);\n  const [correo, setcorreo] = useState(\"\");\n  const [clave, setclave] = useState(\"\");\n  const [error, seterror] = useState(null);\n\n  const loginUser = user => {\n    const {\n      correo,\n      clave\n    } = user;\n    axios.post('http://localhost:3001/server/login', {\n      correo,\n      clave\n    }).then(response => {\n      if (response.data.ok === true) {\n        jwtToken(response.data.token);\n      } else {\n        seterror(response.data.err.message);\n        logoutUser(context.dispatch);\n      }\n    }).catch(error => {\n      seterror(error.response.data.err.message);\n      logoutUser(context.dispatch);\n    });\n  };\n\n  const jwtToken = token => {\n    localStorage.setItem(\"jwt\", token);\n    const decoded = jwt_decode(token);\n    seterror(null);\n    context.dispatch(setCurrentUser(decoded));\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    const user = {\n      correo,\n      clave\n    };\n\n    if (correo === \"\" || clave === \"\") {\n      seterror(\"Ingrese datos correctamente\");\n    } else {\n      loginUser(user);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Center, {\n    children: /*#__PURE__*/_jsxDEV(Form, {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(H1, {\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(WrappLogin, {\n        children: [/*#__PURE__*/_jsxDEV(Input, {\n          placeholder: \"Ingrese Usuario\",\n          onChange: e => setcorreo(e.target.value),\n          id: \"correo\",\n          name: \"correo\",\n          value: correo,\n          autoComplete: \"off\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          type: \"password\",\n          placeholder: \"Ingrese Clave\",\n          onChange: e => setclave(e.target.value),\n          id: \"clave\",\n          name: \"clave\",\n          value: clave\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"submit\",\n          children: \"Ingresar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this), error ? /*#__PURE__*/_jsxDEV(Error, {\n          mensaje: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 20\n        }, this) : null]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Login, \"xsLJNKVSQU1rDqU2WmLjY2Wyr8M=\");\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["/home/ueslei/Documentos/GitHub/testefrontamai/src/pages/Login.js"],"names":["React","useContext","useState","Center","Form","H1","WrappLogin","Input","Button","AuthGlobal","setCurrentUser","logoutUser","Error","jwt_decode","axios","Login","context","correo","setcorreo","clave","setclave","error","seterror","loginUser","user","post","then","response","data","ok","jwtToken","token","err","message","dispatch","catch","localStorage","setItem","decoded","handleSubmit","e","preventDefault","target","value"],"mappings":"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","sourcesContent":["import React, { useContext, useState } from \"react\";\nimport { Center, Form, H1, WrappLogin, Input, Button } from \"../styles/styles\";\nimport { AuthGlobal } from \"../context/store/Auth\";\nimport { setCurrentUser, logoutUser } from \"../context/actions/autenticacion.action\";\nimport Error from \"../components/Error\";\n\nimport jwt_decode from \"jwt-decode\";\nimport axios from 'axios'\n\nconst Login = () => {\n  const context = useContext(AuthGlobal);\n  const [correo, setcorreo] = useState(\"\");\n  const [clave, setclave] = useState(\"\");\n  const [error, seterror] = useState(null);\n\n  const loginUser = user => {\n      const {correo, clave} = user\n      axios.post('http://localhost:3001/server/login', {\n        correo,\n        clave\n      })\n      .then( response => {\n        if (response.data.ok === true) {\n            jwtToken(response.data.token)\n          } else {\n            seterror(response.data.err.message)\n            logoutUser(context.dispatch);\n          }\n      })\n      .catch( error => {\n        seterror(error.response.data.err.message)\n        logoutUser(context.dispatch);\n      });\n  };\n\n  const jwtToken = token => {\n    localStorage.setItem(\"jwt\", token);\n    const decoded = jwt_decode(token);\n    seterror(null)\n    context.dispatch(setCurrentUser(decoded));\n  }\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    const user = { correo, clave };\n\n    if (correo === \"\" || clave === \"\") {\n      seterror(\"Ingrese datos correctamente\");\n    } else {\n      loginUser(user);\n    }\n    \n  };\n\n  return (\n    <Center>\n      <Form onSubmit={handleSubmit}>\n        <H1>Login</H1>\n        <WrappLogin>\n          <Input\n            placeholder=\"Ingrese Usuario\"\n            onChange={(e) => setcorreo(e.target.value)}\n            id=\"correo\"\n            name=\"correo\"\n            value={correo}\n            autoComplete=\"off\"\n          />\n          <Input\n            type=\"password\"\n            placeholder=\"Ingrese Clave\"\n            onChange={(e) => setclave(e.target.value)}\n            id=\"clave\"\n            name=\"clave\"\n            value={clave}\n          />\n          <br />\n\n          <Button type=\"submit\">Ingresar</Button>\n          {error ? <Error mensaje={error} /> : null}\n        </WrappLogin>\n      </Form>\n    </Center>\n  );\n}\n\nexport default Login\n"]},"metadata":{},"sourceType":"module"}