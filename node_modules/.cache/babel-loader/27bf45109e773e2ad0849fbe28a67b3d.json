{"ast":null,"code":"var _jsxFileName = \"/home/ues/Documentos/GitHub/testefrontamai/src/Login.js\";\nimport React, { Component } from 'react';\nimport swal from 'sweetalert';\nimport { Button, TextField, Link, CircularProgress } from '@material-ui/core';\nimport axios from 'axios';\nimport \"./Login.css\";\nexport default class Login extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onChange = e => this.setState({\n      [e.target.name]: e.target.value\n    });\n\n    this.login = async () => {\n      const {\n        username,\n        password,\n        loading\n      } = this.state;\n      if (loading) return;\n\n      if (!username || !password) {\n        swal({\n          text: 'Preencha usuário e senha',\n          icon: 'error'\n        });\n        return;\n      }\n\n      this.setState({\n        loading: true\n      });\n\n      try {\n        var _res$data, _res$data2, _res$data3;\n\n        const res = await axios.post('https://backtestmar.onrender.com/login', {\n          username,\n          password\n        });\n        const token = res === null || res === void 0 ? void 0 : (_res$data = res.data) === null || _res$data === void 0 ? void 0 : _res$data.token;\n        const id = (res === null || res === void 0 ? void 0 : (_res$data2 = res.data) === null || _res$data2 === void 0 ? void 0 : _res$data2.id) || (res === null || res === void 0 ? void 0 : (_res$data3 = res.data) === null || _res$data3 === void 0 ? void 0 : _res$data3._id);\n\n        if (!token) {\n          swal({\n            text: 'Resposta do servidor não contém token.',\n            icon: 'error'\n          });\n          this.setState({\n            loading: false\n          });\n          return;\n        }\n\n        localStorage.setItem('token', token);\n        if (id) localStorage.setItem('user_id', id);\n        swal({\n          text: 'Login realizado com sucesso!',\n          icon: 'success'\n        });\n        this.props.history.push('/dashboard');\n      } catch (err) {\n        var _err$response, _err$response$data;\n\n        const msg = (err === null || err === void 0 ? void 0 : (_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.errorMessage) || (err === null || err === void 0 ? void 0 : err.message) || 'Erro inesperado ao fazer login.';\n        swal({\n          text: msg,\n          icon: 'error'\n        });\n      } finally {\n        this.setState({\n          loading: false\n        });\n      }\n    };\n\n    this.state = {\n      username: '',\n      password: '',\n      loading: false\n    };\n  }\n\n  render() {\n    const {\n      username,\n      password,\n      loading\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"login-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"login-card\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 11\n      }\n    }, \"Login\"), /*#__PURE__*/React.createElement(TextField, {\n      fullWidth: true,\n      type: \"text\",\n      autoComplete: \"off\",\n      name: \"username\",\n      value: username,\n      onChange: this.onChange,\n      placeholder: \"Usu\\xE1rio\",\n      margin: \"dense\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(TextField, {\n      fullWidth: true,\n      type: \"password\",\n      autoComplete: \"off\",\n      name: \"password\",\n      value: password,\n      onChange: this.onChange,\n      placeholder: \"Senha\",\n      margin: \"dense\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"login-actions\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"contained\",\n      color: \"primary\",\n      onClick: this.login,\n      disabled: !username || !password || loading,\n      className: \"login-btn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 13\n      }\n    }, loading ? 'Entrando...' : 'Login'), loading && /*#__PURE__*/React.createElement(CircularProgress, {\n      size: 26,\n      className: \"login-loading\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(Link, {\n      href: \"/register\",\n      className: \"login-register-link\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 13\n      }\n    }, \"Registro\"))));\n  }\n\n}","map":{"version":3,"sources":["/home/ues/Documentos/GitHub/testefrontamai/src/Login.js"],"names":["React","Component","swal","Button","TextField","Link","CircularProgress","axios","Login","constructor","props","onChange","e","setState","target","name","value","login","username","password","loading","state","text","icon","res","post","token","data","id","_id","localStorage","setItem","history","push","err","msg","response","errorMessage","message","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport swal from 'sweetalert';\nimport { Button, TextField, Link, CircularProgress } from '@material-ui/core';\nimport axios from 'axios';\nimport \"./Login.css\";\n\nexport default class Login extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      username: '',\n      password: '',\n      loading: false\n    };\n  }\n\n  onChange = (e) => this.setState({ [e.target.name]: e.target.value });\n\n  login = async () => {\n    const { username, password, loading } = this.state;\n\n    if (loading) return;\n\n    if (!username || !password) {\n      swal({ text: 'Preencha usuário e senha', icon: 'error' });\n      return;\n    }\n\n    this.setState({ loading: true });\n\n    try {\n      const res = await axios.post('https://backtestmar.onrender.com/login', {\n        username,\n        password\n      });\n\n      const token = res?.data?.token;\n      const id = res?.data?.id || res?.data?._id;\n\n      if (!token) {\n        swal({ text: 'Resposta do servidor não contém token.', icon: 'error' });\n        this.setState({ loading: false });\n        return;\n      }\n\n      localStorage.setItem('token', token);\n      if (id) localStorage.setItem('user_id', id);\n\n      swal({ text: 'Login realizado com sucesso!', icon: 'success' });\n\n      this.props.history.push('/dashboard');\n\n    } catch (err) {\n      const msg =\n        err?.response?.data?.errorMessage ||\n        err?.message ||\n        'Erro inesperado ao fazer login.';\n\n      swal({ text: msg, icon: 'error' });\n    } finally {\n      this.setState({ loading: false });\n    }\n  }\n\n  render() {\n    const { username, password, loading } = this.state;\n\n    return (\n      <div className=\"login-container\">\n\n        <div className=\"login-card\">\n          <h2>Login</h2>\n\n          <TextField\n            fullWidth\n            type=\"text\"\n            autoComplete=\"off\"\n            name=\"username\"\n            value={username}\n            onChange={this.onChange}\n            placeholder=\"Usuário\"\n            margin=\"dense\"\n          />\n\n          <TextField\n            fullWidth\n            type=\"password\"\n            autoComplete=\"off\"\n            name=\"password\"\n            value={password}\n            onChange={this.onChange}\n            placeholder=\"Senha\"\n            margin=\"dense\"\n          />\n\n          <div className=\"login-actions\">\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              onClick={this.login}\n              disabled={!username || !password || loading}\n              className=\"login-btn\"\n            >\n              {loading ? 'Entrando...' : 'Login'}\n            </Button>\n\n            {loading && (\n              <CircularProgress size={26} className=\"login-loading\" />\n            )}\n\n            <Link href=\"/register\" className=\"login-register-link\">\n              Registro\n            </Link>\n          </div>\n        </div>\n        \n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}