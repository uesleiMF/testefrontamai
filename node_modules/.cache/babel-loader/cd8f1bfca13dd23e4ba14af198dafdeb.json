{"ast":null,"code":"var _jsxFileName = \"/home/ues/Documentos/GitHub/testefrontamai/src/Login.js\";\nimport React, { Component } from 'react';\nimport swal from 'sweetalert';\nimport { Button, TextField, Link, CircularProgress } from '@material-ui/core';\n\nconst axios = require('axios');\n\nexport default class Login extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onChange = e => this.setState({\n      [e.target.name]: e.target.value\n    });\n\n    this.login = async () => {\n      const {\n        username,\n        password\n      } = this.state;\n\n      if (!username || !password) {\n        swal({\n          text: 'Preencha usuário e senha',\n          icon: 'error'\n        });\n        return;\n      }\n\n      this.setState({\n        loading: true\n      });\n\n      try {\n        var _res$data, _res$data2, _res$data3;\n\n        const res = await axios.post('https://backtestmar.onrender.com/login', {\n          username,\n          password\n        });\n        const token = res === null || res === void 0 ? void 0 : (_res$data = res.data) === null || _res$data === void 0 ? void 0 : _res$data.token;\n        const id = (res === null || res === void 0 ? void 0 : (_res$data2 = res.data) === null || _res$data2 === void 0 ? void 0 : _res$data2.id) || (res === null || res === void 0 ? void 0 : (_res$data3 = res.data) === null || _res$data3 === void 0 ? void 0 : _res$data3._id);\n\n        if (!token) {\n          swal({\n            text: 'Resposta do servidor não contém token.',\n            icon: 'error'\n          });\n          this.setState({\n            loading: false\n          });\n          return;\n        }\n\n        localStorage.setItem('token', token);\n        if (id) localStorage.setItem('user_id', id);\n        swal({\n          text: 'Login realizado com sucesso!',\n          icon: 'success'\n        });\n        this.props.history.push('/dashboard');\n      } catch (err) {\n        var _err$response, _err$response$data;\n\n        const msg = (err === null || err === void 0 ? void 0 : (_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.errorMessage) || (err === null || err === void 0 ? void 0 : err.message) || 'Erro inesperado ao fazer login.';\n        swal({\n          text: msg,\n          icon: 'error'\n        });\n      } finally {\n        this.setState({\n          loading: false\n        });\n      }\n    };\n\n    this.state = {\n      username: '',\n      password: '',\n      loading: false\n    };\n  }\n\n  render() {\n    const {\n      username,\n      password,\n      loading\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        marginTop: '200px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }\n    }, \"Login\"), /*#__PURE__*/React.createElement(TextField, {\n      fullWidth: true,\n      type: \"text\",\n      autoComplete: \"off\",\n      name: \"username\",\n      value: username,\n      onChange: this.onChange,\n      placeholder: \"Usu\\xE1rio\",\n      margin: \"dense\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(TextField, {\n      fullWidth: true,\n      type: \"password\",\n      autoComplete: \"off\",\n      name: \"password\",\n      value: password,\n      onChange: this.onChange,\n      placeholder: \"Senha\",\n      margin: \"dense\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        marginTop: 16,\n        display: 'flex',\n        alignItems: 'center'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"contained\",\n      color: \"primary\",\n      onClick: this.login,\n      disabled: !username || !password || loading,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 11\n      }\n    }, loading ? 'Entrando...' : 'Login'), loading && /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        marginLeft: 12\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(CircularProgress, {\n      size: 24,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 55\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        marginLeft: 'auto'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      href: \"/register\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 13\n      }\n    }, \"Registro\"))));\n  }\n\n}","map":{"version":3,"sources":["/home/ues/Documentos/GitHub/testefrontamai/src/Login.js"],"names":["React","Component","swal","Button","TextField","Link","CircularProgress","axios","require","Login","constructor","props","onChange","e","setState","target","name","value","login","username","password","state","text","icon","loading","res","post","token","data","id","_id","localStorage","setItem","history","push","err","msg","response","errorMessage","message","render","marginTop","display","alignItems","marginLeft"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport swal from 'sweetalert';\nimport { Button, TextField, Link, CircularProgress } from '@material-ui/core';\nconst axios = require('axios');\n\nexport default class Login extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      username: '',\n      password: '',\n      loading: false\n    };\n  }\n\n  onChange = (e) => this.setState({ [e.target.name]: e.target.value });\n\n  login = async () => {\n    const { username, password } = this.state;\n\n    if (!username || !password) {\n      swal({ text: 'Preencha usuário e senha', icon: 'error' });\n      return;\n    }\n\n    this.setState({ loading: true });\n\n    try {\n      const res = await axios.post('https://backtestmar.onrender.com/login', {\n        username,\n        password\n      });\n\n      const token = res?.data?.token;\n      const id = res?.data?.id || res?.data?._id;\n\n      if (!token) {\n        swal({ text: 'Resposta do servidor não contém token.', icon: 'error' });\n        this.setState({ loading: false });\n        return;\n      }\n\n      localStorage.setItem('token', token);\n      if (id) localStorage.setItem('user_id', id);\n\n      swal({ text: 'Login realizado com sucesso!', icon: 'success' });\n\n      this.props.history.push('/dashboard');\n\n    } catch (err) {\n      const msg =\n        err?.response?.data?.errorMessage ||\n        err?.message ||\n        'Erro inesperado ao fazer login.';\n\n      swal({ text: msg, icon: 'error' });\n    } finally {\n      this.setState({ loading: false });\n    }\n  }\n\n  render() {\n    const { username, password, loading } = this.state;\n\n    return (\n      <div style={{ marginTop: '200px' }}>\n        <h2>Login</h2>\n\n        <TextField\n          fullWidth\n          type=\"text\"\n          autoComplete=\"off\"\n          name=\"username\"\n          value={username}\n          onChange={this.onChange}\n          placeholder=\"Usuário\"\n          margin=\"dense\"\n        />\n\n        <TextField\n          fullWidth\n          type=\"password\"\n          autoComplete=\"off\"\n          name=\"password\"\n          value={password}\n          onChange={this.onChange}\n          placeholder=\"Senha\"\n          margin=\"dense\"\n        />\n\n        <div style={{ marginTop: 16, display: 'flex', alignItems: 'center' }}>\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            onClick={this.login}\n            disabled={!username || !password || loading}\n          >\n            {loading ? 'Entrando...' : 'Login'}\n          </Button>\n\n          {loading && <div style={{ marginLeft: 12 }}><CircularProgress size={24} /></div>}\n\n          <div style={{ marginLeft: 'auto' }}>\n            <Link href=\"/register\">Registro</Link>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}